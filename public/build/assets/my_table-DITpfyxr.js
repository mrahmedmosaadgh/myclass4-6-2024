import{y as M,d,aa as A,o as _,e as c,a as l,b as m,w as p,F as v,h as g,g as f,p as w,A as x,n as B,i as N,t as b}from"./app-DuCM5fMY.js";import{u as S}from"./appstore-i93wDcAb.js";import D from"./table_head_item-BJfgT00P.js";import E from"./table_head_col_choose-Ds1bwggl.js";import F from"./table_col_action-qr3QjPzY.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./LoadingOutlined-C7QN_DUS.js";import"./AntdIcon-9khPcjWE.js";import"./CloseOutlined-CxVmtEZu.js";import"./ExclamationCircleFilled-B0V7oa9j.js";import"./CloseCircleFilled-BQZlZZal.js";import"./table_sort_icon-9orMvKBv.js";import"./CaretUpOutlined-D9u2HXcH.js";import"./Search-DKdOCY9h.js";import"./FormItemContext-WqdLE0eK.js";import"./index-lgGGxHJv.js";import"./useState-BLwVHUq_.js";import"./index-Nnij7LAV.js";import"./motion-DAWOpLEP.js";import"./isPlainObject-CkZT4Lg7.js";import"./MoreOutlined-Dn8n-63j.js";import"./index-BSMZMoC6.js";import"./index-Da8uXs_6.js";import"./EyeOutlined-CMaT_qmz.js";import"./index-D9SNFcq0.js";import"./index-CLPL0Y6L.js";import"./EditOutlined-CQNci86I.js";import"./DeleteOutlined-B394q2Md.js";const z={class:"pt-4 w-screen flex justify-center px-4"},I={class:"rounded overflow-x-auto w-full m-auto"},L={cellspacing:"0",class:"tg w-full"},q={class:""},G=["onClick"],H={class:"w-8"},J={class:"p-0 text-xs flex whitespace-nowrap justify-items-center"},K={class:"pt-1 text-xs"},O={class:"p-0 text-xs flex whitespace-nowrap"},P={class:"p-0 text-xs"},Q={__name:"my_table",props:["data","settings","data_create"],emits:["save_update","save_create","save_delete","text_filter","view"],setup(y,{emit:k}){const i=y,$=k,n=S();M(()=>{$("view")});function C(o,e,s){j({fun:"update_val_c_subject",data:{id:o,col:e,val:s}},{route:"/api/school_admin/c_subject",msg:null,loading:!0,res_ver:"update_val_c_subject",msg_error:"msg_error",sys_error:!0,log:!0,d_fun:"update_val_c_subject"})}function j(o=null,e={route:null,msg:null,loading:!0,log:!0,res_ver:"ver",msg_error:"Error",sys_error:!1,d_fun:null}){if(e.route==null){message.error("no route");return}e.loading?n.loading=!0:n.loading=!1,axios.post(e.route,{data:o}).then(s=>{n.d_counter++,n.d_fun=e.d_fun,e.res_ver&&(n.res[e.res_ver]=s.data),n.loading=!1,(e==null?void 0:e.msg)!=null&&message.success(e.msg),e.log}).catch(s=>{var r,a,u;if(n.loading=!1,((r=s==null?void 0:s.response)==null?void 0:r.status)==419){if(!confirm("reload"))return;window.location.reload()}var t=e.sys_error?e.msg_error+" :"+((u=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:u.message):null;e.msg!=null&&message.error(t)})}d({open_me:!1}),d({});const R=d(1),V=d(""),h=d({sort:R.value,col:"name",text:"name 122",search_text:V.value});function U(o,e){}return(o,e)=>{const s=A("my_check_box");return _(),c("div",z,[l("div",I,[l("table",L,[l("thead",q,[l("tr",null,[l("th",null,[m(E,{class:"p-0 whitespace-nowrap",lang:i.settings.lang,data:i.settings.cols},{default:p(()=>[f("table_head_item err")]),_:1},8,["lang","data"])]),(_(!0),c(v,null,g(i.settings.cols,(t,r)=>w((_(),c("th",{key:r},[m(D,{class:"p-0 whitespace-nowrap",onMy_col:a=>{t=a,h.value.search_text=""},onText_filter:e[0]||(e[0]=a=>o.$emit("text_filter",a)),col:t.col,text:i.settings.lang=="en"?t.en:t.ar,data:h.value},{default:p(()=>[f("table_head_item err")]),_:2},1032,["onMy_col","col","text","data"])])),[[x,t.show]])),128))])]),l("tbody",null,[(_(!0),c(v,null,g(i.data,(t,r)=>(_(),c("tr",{key:r,class:B({even:(r+1)%2===0,selected:t.select==1}),onClick:N(a=>o.handleCtrlClick(r),["ctrl"])},[l("td",H,[l("div",J,[m(F,{class:"px-2 scale-x-150",onRow_update:a=>o.$emit("row_update",t),onRow_delete:a=>o.$emit("row_delete",t),onRow_view:a=>void 0},{default:p(()=>[f("table_col_action err")]),_:2},1032,["onRow_update","onRow_delete","onRow_view"]),l("div",K,b(r+1),1)])]),l("td",null,[m(s,{class:"text-2xl",checkbox_data:{data:t==null?void 0:t.report_title,text:"   "},val:{val_true:1,val_false:0},onVal:a=>{t.report_title=a,C(t.id,"report_title",t==null?void 0:t.report_title)}},{default:p(()=>[f("my_check_box err")]),_:2},1032,["checkbox_data","onVal"])]),(_(!0),c(v,null,g(i.settings.cols,(a,u)=>w((_(),c("td",{key:u},[l("div",O,[l("div",P,b(t[a.col]),1)])])),[[x,a.show]])),128))],10,G))),128))])])])])}}},$e=T(Q,[["__scopeId","data-v-5c800041"]]);export{$e as default};
