import{u as R}from"./appstore-i93wDcAb.js";import U from"./add_school_semester_new-gvo8G5pb.js";import q from"./add_school_semester_update-CJ6oUE3o.js";import{m as H,d as h,y as I,aa as J,u as d,o as l,e as _,a as o,t as i,c as f,w as s,f as b,b as c,n as K,F as k,h as x,g as m}from"./app-DuCM5fMY.js";import{D as Q}from"./index-CSutdnUg.js";import{M as W}from"./index-CfxGvgOQ.js";import{B as X}from"./index-lgGGxHJv.js";import{a as Y,_ as Z,M as ee}from"./index-BPASUVML.js";import{_ as oe}from"./index-D9SNFcq0.js";import"./LoadingOutlined-C7QN_DUS.js";import"./AntdIcon-9khPcjWE.js";import"./CloseOutlined-CxVmtEZu.js";import"./ExclamationCircleFilled-B0V7oa9j.js";import"./CloseCircleFilled-BQZlZZal.js";/* empty css                                                                                */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BSMZMoC6.js";import"./Search-DKdOCY9h.js";import"./FormItemContext-WqdLE0eK.js";import"./index-Nnij7LAV.js";import"./motion-DAWOpLEP.js";import"./useState-BLwVHUq_.js";import"./isPlainObject-CkZT4Lg7.js";import"./index-Da8uXs_6.js";import"./EyeOutlined-CMaT_qmz.js";import"./index-DyeIOCE9.js";import"./KeyCode-B_gOgbN6.js";import"./pickAttrs-BzBa2xXa.js";import"./slide-B7qp9WAr.js";import"./isMobile-BbN7I0i_.js";import"./useMergedState-Y_64JI8B.js";import"./DownOutlined-BUTiwnGH.js";import"./CheckOutlined-ClQcdeBd.js";import"./move-C_MpYLjS.js";import"./index-CoDRXsta.js";/* empty css                                                                                   */import"./index-CLPL0Y6L.js";import"./styleChecker-Bo7eabvc.js";import"./shallowequal-BtM4LMc3.js";import"./_arrayIncludes-BICyThra.js";import"./collapseMotion-iRHk9BZf.js";const te={key:0,class:"bg-white py-5 p-2"},ae={class:"flex"},se={class:"p-2"},ne=o("div",{class:"p-1 gap-1 w-4 cursor-pointer flex flex-col text-2xl scale-50"},[o("div",{class:"rounded bg-blue-600 h-2 w-2"}),o("div",{class:"rounded bg-blue-600 h-2 w-2"}),o("div",{class:"rounded bg-blue-600 h-2 w-2"})],-1),le={key:0,name:"main_table"},re=o("div",{class:"p-0 w-4 h-4 mybtn_plus_white"},null,-1),de={class:"flex w-full justify-center text-center"},ie={class:"overflow-auto"},_e=["dir"],ce=o("th",null,"#",-1),ue={class:"noprint"},me={class:"flex"},pe=o("div",{class:"mybtn_edit_white w-4 h-4 m-1 p-2"},null,-1),he=o("div",{class:"mybtn_delete cursor-pointer w-6 h-6 p-3"},null,-1),w="/api/school_admin/add_school_semester/",so={__name:"c_notes",setup(fe){const e=R(),S=H(()=>e.lang),B=h(""),M=h(!1),n=h({show:!1,mood:"modal_update",data:{}}),A=h({create:w+"create",update:w+"update",delete:w+"delete",show_all:w+"show_all",show:w+"show"}),N=[{col:"year",en:"year",ar:"year",show:1},{col:"en",en:"name",ar:"name",show:1},{col:"ar",en:"name_ar",ar:"name_ar",show:1},{col:"active",en:"active",ar:"نشط",show:1}],V=h({table_title:{en:"school classes",ar:"قائمة فصول المدرسة   "},new:{en:"new",ar:"جديد  "},show_all:{en:"show_all",ar:"  اظهار الكل  "},sure:{en:"Are you sure?",ar:"    هل انت متاكد ؟  "},search:{en:"search",ar:"بحث  "},result_count:{en:"result_count",ar:"عدد النواتج  "},semester:{en:"semester",ar:" الفصل الدراسي  "},add:{en:"Add",ar:" اضافة"},stage:{en:" Stage   ",ar:"      المرحلة الدراسية      "},grade:{en:"Grade",ar:" الصف"},classroom:{en:"classroom",ar:" الفصل"},notes:{en:"Notes",ar:" ملاحظات"},edit:{en:"Edit",ar:"  تعديل"},delete:{en:"delete",ar:" حذف"},agree:{en:"agree",ar:" موافق"},cancel:{en:"cancel",ar:" الغاء"},msg1:{en:"cancel",ar:" الغاء"},msg2:{en:"cancel",ar:" الغاء"},create:{en:"create",ar:" انشاء جديد"},update:{en:"update",ar:" تحديث"},yes:{en:"yes",ar:"  موافق "},no:{en:"no",ar:" الغاء"},msg_confirm:{en:"Are you sure ?",ar:" هل انت متاكد ؟"}});function z(){n.mood="modal_create",n.show=!0,n.value={show:!0,mood:"modal_create",data:{school_id:e.school_id,year:"2023-2024",en:"",ar:"",start:"",end:"",status:1,active:1,notes:null,week_end_days_off:[5,6]}}}async function E(r){e.loading=!0;try{await axios.post(A.value.delete,{id:r}).then(a=>{e.loading=!1,v(),e.db_success=!0})}catch{e.loading=!1,e.db_error=!0}}I(()=>{v()});async function v(){e.loading=!0;try{await axios.post(A.value.show_all,{school_id:e.school_id}).then(r=>{var a,y,g;e.loading=!1,B.value=r.data.data,ap.user_schools=r.data.user_schools,e.school_id=r.data.school_id,e.school_name=(g=(y=(a=r.data.user_schools)==null?void 0:a[0])==null?void 0:y.myschool)==null?void 0:g.name_ar})}catch{e.loading=!1}}function F(r,a){n.value={show:!0,mood:"modal_update",data:a}}return(r,a)=>{var $,D;const y=Y,g=Z,O=ee,P=Q,T=W,C=X,j=oe,G=J("no_permission");return d(e).permissions.has("add_school_semester")?(l(),_("div",te,[o("div",ae,[o("div",se,i(d(e).school_name),1),((D=($=d(e))==null?void 0:$.user_schools)==null?void 0:D.length)>1?(l(),f(P,{key:0},{overlay:s(()=>[c(O,null,{default:s(()=>[c(y),(l(!0),_(k,null,x(d(e).user_schools,t=>(l(),f(g,{key:t.id,onClick:u=>r.show_all_get(t.school_id,t.myschool.name_ar)},{default:s(()=>[o("div",null,i(t.myschool.name_ar),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:s(()=>[ne]),_:1})):b("",!0)]),c(T,{okButtonProps:{disabled:!0,hidden:!0},cancelButtonProps:{disabled:!0,hidden:!0},maskClosable:!1,ref:"modalRef",open:n.value.show,"onUpdate:open":a[2]||(a[2]=t=>n.value.show=t),"wrap-style":{overflow:"auto"}},{title:s(()=>[m(i(n.value.mood=="modal_update"?"update":"new"),1)]),default:s(()=>[n.value.mood=="modal_create"?(l(),f(U,{key:0,onOpen:a[0]||(a[0]=t=>{n.value.show=t,v()}),data:n.value.data},{default:s(()=>[m("modal_new err")]),_:1},8,["data"])):b("",!0),n.value.mood=="modal_update"?(l(),f(q,{key:1,onOpen:a[1]||(a[1]=t=>{n.value.show=t,v()}),data:n.value.data},{default:s(()=>[m("modal_update err")]),_:1},8,["data"])):b("",!0)]),_:1},8,["open"]),d(e).school_id!=null?(l(),_("section",le,[c(C,{class:"noprint",type:"primary",onClick:a[3]||(a[3]=t=>z())},{default:s(()=>[re]),_:1}),o("div",de,i(V.value.table_title[d(e).lang]),1),o("div",ie,[o("table",{class:K(d(e).mytabl_class),dir:d(e).lang=="ar"?"rtl":"ltr"},[o("thead",null,[o("tr",null,[ce,(l(),_(k,null,x(N,(t,u)=>o("th",{key:u},i(t[S.value]),1)),64))])]),o("tbody",null,[(l(!0),_(k,null,x(B.value,(t,u)=>(l(),_("tr",{key:u},[o("td",null,i(u+1),1),(l(),_(k,null,x(N,(p,L)=>o("td",{key:L},i(t[p.col]==1?"نشط":t[p.col]==0?"":t[p.col]),1)),64)),o("td",ue,[o("div",me,[c(C,{size:"small",type:"primary",class:"ml-2",onClick:p=>F(u,t)},{default:s(()=>[pe]),_:2},1032,["onClick"]),c(j,{title:"Title",trigger:"click"},{content:s(()=>[m(i(V.value.sure[d(e).lang])+" delete "+i(t.name)+" ",1),c(C,{type:"primary",danger:"",onClick:p=>{M.value=!M.value,E(t.id)}},{default:s(()=>[m(" delete")]),_:2},1032,["onClick"])]),default:s(()=>[he]),_:2},1024)])])]))),128))])],10,_e)])])):b("",!0)])):(l(),f(G,{key:1},{default:s(()=>[m("no_permission err")]),_:1}))}}};export{so as default};
