import{d as B,y as N,o as c,e as u,a as s,t as o,u as l,F as g,h as v,b as i,w,p as b,A,f as D,a5 as x,g as S}from"./app-DuCM5fMY.js";import{u as U}from"./appstore-i93wDcAb.js";import{B as m}from"./index-lgGGxHJv.js";import{D as E}from"./DeleteOutlined-B394q2Md.js";import{P as $}from"./PlusOutlined-CuKesnqQ.js";import"./LoadingOutlined-C7QN_DUS.js";import"./AntdIcon-9khPcjWE.js";import"./CloseOutlined-CxVmtEZu.js";import"./ExclamationCircleFilled-B0V7oa9j.js";import"./CloseCircleFilled-BQZlZZal.js";import"./useState-BLwVHUq_.js";const F=["dir"],M=["dir"],O={class:""},P=s("th",null,"#",-1),T={class:"w-24"},L={class:"w-24"},z={class:"w-12"},G={class:"w-12"},H={class:"w-8"},I={class:"p-0 text-xs flex whitespace-nowrap"},J={class:"p-0 text-xs"},K={class:"px-1 green"},Q={class:"w-24"},R=["title"],W={key:0,class:"p-0 text-gray-400"},X=["onUpdate:modelValue"],Y=["value"],Z=["onUpdate:modelValue"],ee=["value"],pe={__name:"c_class_join_class_subject_teacher",props:["data","subjects","my_teachers","classroom"],setup(p){const h=p,t=U(),j=B(0);N(()=>{var n;(n=h.data)==null||n.my_subjects.forEach(r=>{r.deleted=0})});function V(n){var r={fun:"update_report_sequence",data:n},_={route:"/api/school_admin/c_class",msg:null,loading:!0,log:!0,res_ver:"update_report_sequence",msg_error:"Error",sys_error:!1,d_fun:null};t.loading=!0,axios.post(_.route,{data:r}).then(d=>{t.d_counter++,t.d_fun=_.d_fun,t.res[_.res_ver]=d.data,t.loading=!1}).catch(d=>{var e;if(t.loading=!1,((e=d==null?void 0:d.response)==null?void 0:e.status)==419){if(!confirm("reload"))return;window.location.reload()}})}function C(){var r;var n={id:null,my_teacher:{ar:""},my_subject:{id:null},class_id:"",teacher_id:"",subject_id:"",deleted:0};(r=h.data)==null||r.my_subjects.push(n)}function q(n){confirm("Are you sure!")&&(h.data.my_subjects[n].deleted=1)}return(n,r)=>{var d;const _=m;return c(),u("div",{class:"rounded overflow-x-auto w-full m-auto",dir:l(t).lang=="en"?"ltr":"rtl"},[s("table",{cellspacing:"0",class:"tg w-full",dir:l(t).lang=="en"?"ltr":"rtl"},[s("thead",O,[s("tr",null,[P,s("th",T,o(l(t).lang=="en"?"report order":"الترتيب في التقرير"),1),s("th",L,o(l(t).lang=="en"?"Name":"الاسم"),1),s("th",z,o(l(t).lang=="en"?"grade":"الصف"),1),s("th",G,o(l(t).lang=="en"?"Teacher":"المعلم"),1)])]),s("tbody",null,[(c(!0),u(g,null,v((d=p.data)==null?void 0:d.my_subjects,(e,f)=>b((c(),u("tr",{key:f},[s("td",H,[s("div",I,[s("div",J,o(f+1),1)])]),s("td",null,[i(_,{type:"primary",onClick:a=>{j.value++,e.report_sequence=j.value,V(e)}},{default:w(()=>[s("div",K,o(e==null?void 0:e.report_sequence),1)]),_:2},1032,["onClick"])]),s("td",Q,[s("div",{class:"p-0",title:l(t).lang=="en"?(e==null?void 0:e.ar)+" "+(e==null?void 0:e.detail):(e==null?void 0:e.en)+" "+(e==null?void 0:e.detail)},o(l(t).lang=="en"?e==null?void 0:e.en:e==null?void 0:e.ar),9,R)]),s("td",null,[e.subject_id!=e.my_subject.id?(c(),u("div",W)):D("",!0),b(s("select",{class:"w-44 p-2","onUpdate:modelValue":a=>e.subject_id=a},[(c(!0),u(g,null,v(p.subjects,(a,y)=>(c(),u("option",{key:y,value:a.id},o(a.ar+" || "+a.detail),9,Y))),128))],8,X),[[x,e.subject_id]])]),s("td",null,[b(s("select",{class:"w-44 p-2","onUpdate:modelValue":a=>e.teacher_id=a},[S(o(p.my_teachers)+" ",1),(c(!0),u(g,null,v(p.my_teachers,(a,y)=>{var k;return c(),u("option",{key:y,value:a.user_id},o((k=a.my_user)==null?void 0:k.ar),9,ee)}),128))],8,Z),[[x,e.teacher_id]])]),s("td",null,[i(_,{type:"primary",shape:"circle",danger:"",onClick:a=>q(f)},{default:w(()=>[i(l(E))]),_:2},1032,["onClick"])])])),[[A,(e==null?void 0:e.deleted)==0]])),128))])],8,M),i(_,{type:"primary",onClick:r[0]||(r[0]=e=>C())},{default:w(()=>[i(l($))]),_:1})],8,F)}}};export{pe as default};
