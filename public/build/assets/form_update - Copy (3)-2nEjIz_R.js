import{d as h,y as R,o as y,e as b,b as a,w as d,f as G,E as H,a as e,t as n,F as L,h as T,n as J,i as K,g as c,u as C,G as Q,H as W}from"./app-DuCM5fMY.js";import{u as X,e as Y}from"./appstore-i93wDcAb.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{M as ee}from"./index-CfxGvgOQ.js";import{E as te}from"./EditOutlined-CQNci86I.js";import{D as le}from"./DeleteOutlined-B394q2Md.js";import{P as ae}from"./PlusOutlined-CuKesnqQ.js";import"./index-BSMZMoC6.js";import{I as ne}from"./Search-DKdOCY9h.js";import{B as oe}from"./index-lgGGxHJv.js";import{F as se}from"./index-DGrp3v0u.js";import{C as re}from"./index-DCh57rzN.js";import{_ as ue}from"./Ribbon-Tv3FPnrK.js";import{_ as ie}from"./FormItem-CXqkb-Sw.js";import{_ as de}from"./index-C6upw1zv.js";import{_ as me}from"./index-RfeOYOn2.js";import"./LoadingOutlined-C7QN_DUS.js";import"./AntdIcon-9khPcjWE.js";import"./CloseOutlined-CxVmtEZu.js";import"./ExclamationCircleFilled-B0V7oa9j.js";import"./CloseCircleFilled-BQZlZZal.js";import"./KeyCode-B_gOgbN6.js";import"./motion-DAWOpLEP.js";import"./useState-BLwVHUq_.js";import"./pickAttrs-BzBa2xXa.js";import"./styleChecker-Bo7eabvc.js";import"./index-CLPL0Y6L.js";import"./FormItemContext-WqdLE0eK.js";import"./index-Nnij7LAV.js";import"./index-Da8uXs_6.js";import"./EyeOutlined-CMaT_qmz.js";import"./isPlainObject-CkZT4Lg7.js";import"./hasIn-DNGWpuSq.js";import"./_arrayIncludes-BICyThra.js";import"./collapseMotion-iRHk9BZf.js";import"./_flatRest-18Z7FUzD.js";import"./index-BPASUVML.js";import"./shallowequal-BtM4LMc3.js";import"./slide-B7qp9WAr.js";import"./isMobile-BbN7I0i_.js";import"./useMergedState-Y_64JI8B.js";import"./DownOutlined-BUTiwnGH.js";const g=o=>(Q("data-v-09fd5226"),o=o(),W(),o),ce=["dir"],_e={class:"rounded overflow-x-auto w-full m-auto"},pe={cellspacing:"0",class:"tg w-full"},ve={class:""},fe=g(()=>e("th",null,"#",-1)),he=["onClick"],ge={class:"w-8"},ke={class:"p-0 text-xs flex whitespace-nowrap"},xe={class:"p-0 text-xs"},we={class:"p-0 text-gray-400 text-xs"},ye=g(()=>e("br",null,null,-1)),be={class:"p-0 text-2xs text-gray-300"},Ce={class:"p-0 text-gray-400 text-xs"},Ue={class:"p-0 text-gray-400 text-xs"},Ee=g(()=>e("br",null,null,-1)),je={class:"p-0 text-2xs text-gray-300"},$e={class:"p-0 text-gray-200 text-xs"},Ne={class:"flex"},Ve=["dir"],Ae={class:"flex justify-between"},Ie={class:"p-0"},Me=["dir"],Se={class:"flex p-1 justify-between"},ze={class:"p-1"},Be=g(()=>e("span",{class:"px-1 text-red-400"},"*",-1)),Oe={class:"flex p-1 justify-between"},qe={class:"p-1"},De=g(()=>e("span",{class:"px-1 text-transparent"},"*",-1)),Fe={class:"flex justify-between"},Pe={class:"p-0"},Re={__name:"form_update - Copy (3)",props:["open_me","data","lang"],emits:["save_update","cancel"],setup(o,{emit:$}){const s=o,N=$,f=h(!1),r=h({}),U=X();R(()=>{x()});const u=h({}),V=h({detail:{col:"detail",en:"detail",show:!0,ar:"تفاصيل"},ar:{col:"ar",en:"Name Arabic",show:!0,ar:"الاسم عربي  "},en:{col:"en",en:"Name English",show:!0,ar:"الاسم  English  "},highest_mark:{col:"highest_mark",en:"highest_mark",show:!0,ar:"   الدرجة العظمي"},lowest_mark:{col:"lowest_mark",en:"lowest_mark",show:!0,ar:"الحالة"},is_calc:{col:"is_calc",en:"calculated",show:!0,ar:"يتم احتسابها"},is_final:{col:"is_final",en:"final",show:!0,ar:"اختبار نهائي  "},choose:{col:"choose",en:"choose",show:!0,ar:" اختر "},edit:{col:"edit",en:"Edit",show:!0,ar:" تعديل "},add_exam:{col:"add_exam",en:"Add Exam",show:!0,ar:"  اضافة اختبار     "},total_not_found:{col:"total not found",en:"total not found",show:!0,ar:"  المجموع غير موجود        "},total_duplicated:{col:"total duplicated",en:"total not found",show:!0,ar:"  المجموع  متكرر          "},highest_mark_empty:{col:"highest_mark_empty",en:"highest_mark_empty",show:!0,ar:"الدرجة فارعة"},max:{col:"max",en:"Max",show:!0,ar:" الدرجة العظمي  "},min:{col:"min",en:"Min",show:!0,ar:"الدرجة الصغري"},is_final_not_found:{col:"is_final_not_found",en:" final exam not_found",show:!0,ar:" الاختبار النهائي غير محدد    "},notes:{col:"notes",en:"notes",show:!0,ar:"ملاحظات"}}),m=i=>{var t;return((t=V.value[i])==null?void 0:t[s.lang])||i},x=()=>{var i=0;u.value.lowest_mark=0,u.value.highest_mark=0,s.data.my_subject_title.forEach((t,p)=>{if(t.is_calc==1){var v=u.value.highest_mark,_=t.highest_mark;_==null&&(_=0),u.value.highest_mark=v+_,u.value.lowest_mark,t.lowest_mark}t.is_final==0&&i++}),i==0&&Y.error({content:m("is_final_not_found"),key:1})},A=()=>{var i={id:null,detail:null,ar:null,en:null,highest_mark:null,lowest_mark:null,is_calc:1,is_final:0,notes:null};s.data.my_subject_title.push(i)},I=i=>{if(!confirm("Are you sure?"))return;const t=s.data.my_subject_title.indexOf(i);t!==-1&&s.data.my_subject_title.splice(t,1)},M={labelCol:{span:8},wrapperCol:{span:14}},S=h(),z=i=>{f.value=!0,r.value=i},B=()=>{U.d({fun:"save_update",data:s.data},{route:"/api/school_admin/c_subject",msg:U.lang=="en"?"Done with success":"تم بنجاح",loading:!0,res_ver:"save_update",msg_error:"msg_error",sys_error:!0,log:!0,d_fun:"save_update"}),N("show")},O={name:[{required:!0,trigger:"change"}],name_ar:[{required:!0,trigger:"change"}],grades:[{required:!0,trigger:"change"}],stage:[{required:!0,trigger:"change"}]};return(i,t)=>{const p=ne,v=ie,_=oe,w=de,q=se,D=re,F=ue,E=me,P=ee;return s.data?(y(),b("div",{key:0,dir:o.lang=="en"?"lrt":"rtl"},[a(F,{text:"update    semester Exam",dir:"ltr",class:"w-full text-center",color:"blue"},{default:d(()=>[a(D,{hoverable:"",title:" ",class:"cursor-default w-full",dir:o.lang=="en"?"lrt":"rtl"},{default:d(()=>[a(q,H({dir:o.lang=="en"?"lrt":"rtl",ref_key:"formRef",ref:S,name:"custom-validation",model:o.data,rules:O},M),{default:d(()=>[a(v,{"has-feedback":"",label:o.lang=="en"?"detail":"تفاصيل  ",name:"detail"},{default:d(()=>[a(p,{value:s.data.detail,"onUpdate:value":t[0]||(t[0]=l=>s.data.detail=l),type:"text",autocomplete:"off"},null,8,["value"])]),_:1},8,["label"]),a(v,{"has-feedback":"",label:o.lang=="en"?"Name Arabic":"الاسم عربي",name:"ar"},{default:d(()=>[a(p,{value:s.data.ar,"onUpdate:value":t[1]||(t[1]=l=>s.data.ar=l),type:"text",autocomplete:"off"},null,8,["value"])]),_:1},8,["label"]),a(v,{"has-feedback":"",label:o.lang=="en"?"Name English":"الاسم English",name:"en"},{default:d(()=>[a(p,{value:s.data.en,"onUpdate:value":t[2]||(t[2]=l=>s.data.en=l),type:"text",autocomplete:"off"},null,8,["value"])]),_:1},8,["label"]),e("div",_e,[e("table",pe,[e("thead",ve,[e("tr",null,[fe,e("th",null,n(m("ar"))+"-"+n(m("en")),1),e("th",null,n(m("highest_mark")),1),e("th",null,n(m("edit")),1)])]),e("tbody",null,[(y(!0),b(L,null,T(s.data.my_subject_title,(l,k)=>(y(),b("tr",{key:k,class:J({even:(k+1)%2===0,selected:l.select==1}),onClick:K(j=>i.handleCtrlClick(k),["ctrl"])},[e("td",ge,[e("div",ke,[e("div",xe,n(k+1),1)])]),e("td",null,[c(n(o.lang=="en"?l.en:l.ar)+" ",1),e("div",we,[c(n(o.lang=="en"?l.ar:l.en)+" ",1),ye,e("div",be,n(l.detail),1)])]),e("td",null,[c(n(l==null?void 0:l.highest_mark)+" ",1),e("div",Ce," min:"+n(l==null?void 0:l.lowest_mark),1)]),e("td",null,[a(_,{type:"primary",shape:"circle",onClick:j=>z(l),size:"small"},{default:d(()=>[a(C(te))]),_:2},1032,["onClick"]),a(_,{type:"primary",shape:"circle",onClick:j=>I(l),size:"small",class:"mx-8",danger:""},{default:d(()=>[a(C(le))]),_:2},1032,["onClick"])])],10,he))),128))]),e("tfoot",null,[e("tr",null,[e("th",null,n(o.lang=="en"?"sum":"المجموع"),1),e("th",null,[c(n(o.lang=="en"?u.value.en:u.value.ar)+" ",1),e("div",Ue,[c(n(o.lang=="en"?u.value.ar:u.value.en)+" ",1),Ee,e("div",je,n(u.value.detail),1)])]),e("th",null,n(u.value.highest_mark),1),e("th",null,[e("div",$e,[c(" min:"+n(u.value.lowest_mark)+" ",1),a(w,{value:u.value.lowest_mark,"onUpdate:value":t[3]||(t[3]=l=>u.value.lowest_mark=l),onChange:t[4]||(t[4]=l=>x())},null,8,["value"])])])])])])]),a(_,{type:"primary",class:"m-2",shape:"circle",onClick:t[5]||(t[5]=l=>A())},{default:d(()=>[a(C(ae))]),_:1}),a(v,{"has-feedback":"",label:o.lang=="en"?"notes":"ملاحظات",name:"notes"},{default:d(()=>[a(p,{value:s.data.notes,"onUpdate:value":t[6]||(t[6]=l=>s.data.notes=l),type:"text",autocomplete:"off"},null,8,["value"])]),_:1},8,["label"]),e("div",Ne,[a(_,{class:"mx-1",type:"primary","html-type":"submit",onClick:t[7]||(t[7]=l=>B())},{default:d(()=>[c(n(o.lang=="en"?" Save ":" حفظ التعديل  "),1)]),_:1}),a(_,{class:"mx-1",onClick:t[8]||(t[8]=l=>i.$emit("cancel"))},{default:d(()=>[c(n(o.lang=="en"?" Cancel":" الغاء    "),1)]),_:1})])]),_:1},16,["dir","model"])]),_:1},8,["dir"])]),_:1}),a(P,{dir:o.lang=="en"?"ltr":"rtl",open:f.value,"onUpdate:open":t[16]||(t[16]=l=>f.value=l),maskClosable:!1,onOk:t[17]||(t[17]=l=>{f.value=!f.value,x()}),class:"flex"},{default:d(()=>[e("table",{class:"border-0 w-100 px-8",dir:o.lang=="en"?"ltr":"rtl"},[e("tr",null,[e("td",null,[e("div",null,n(m("ar")),1),a(p,{value:r.value.ar,"onUpdate:value":t[9]||(t[9]=l=>r.value.ar=l)},null,8,["value"])])]),e("tr",null,[e("td",null,[e("div",null,n(m("en")),1),a(p,{value:r.value.en,"onUpdate:value":t[10]||(t[10]=l=>r.value.en=l)},null,8,["value"])])]),e("tr",null,[e("td",null,[e("div",null,n(m("detail")),1),a(p,{value:r.value.detail,"onUpdate:value":t[11]||(t[11]=l=>r.value.detail=l)},null,8,["value"])])]),e("tr",null,[e("td",null,[e("div",Ae,[e("div",Ie,n(m("is_final"))+":",1),a(E,{size:"small",checked:r.value.is_final,"onUpdate:checked":t[12]||(t[12]=l=>r.value.is_final=l),unCheckedValue:0,checkedValue:1},null,8,["checked"])])])])],8,Ve),e("table",{class:"border-0 w-100 px-8",dir:o.lang=="en"?"ltr":"rtl"},[e("tr",null,[e("td",null,[e("div",Se,[e("div",ze,[Be,c(n(m("max")),1)]),a(w,{value:r.value.highest_mark,"onUpdate:value":t[13]||(t[13]=l=>r.value.highest_mark=l)},null,8,["value"])])])]),e("tr",null,[e("td",null,[e("div",Oe,[e("div",qe,[De,c(n(m("min")),1)]),a(w,{value:r.value.lowest_mark,"onUpdate:value":t[14]||(t[14]=l=>r.value.lowest_mark=l)},null,8,["value"])])])]),e("tr",null,[e("td",null,[e("div",Fe,[e("div",Pe,n(m("is_calc"))+":",1),a(E,{size:"small",checked:r.value.is_calc,"onUpdate:checked":t[15]||(t[15]=l=>r.value.is_calc=l),unCheckedValue:0,checkedValue:1},null,8,["checked"])])])])],8,Me)]),_:1},8,["dir","open"])],8,ce)):G("",!0)}}},At=Z(Re,[["__scopeId","data-v-09fd5226"]]);export{At as default};
