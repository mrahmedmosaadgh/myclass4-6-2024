import{d as x,y as T,o as v,e as f,b as s,w as d,f as V,E as J,a as t,t as n,F as $,h as N,n as K,g as m,u as C,p as Q,a5 as W,G as X,H as Y}from"./app-DuCM5fMY.js";import{u as Z}from"./appstore-i93wDcAb.js";import{_ as tt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{M as et}from"./index-CfxGvgOQ.js";import{E as at}from"./EditOutlined-CQNci86I.js";import{D as lt}from"./DeleteOutlined-B394q2Md.js";import{P as st}from"./PlusOutlined-CuKesnqQ.js";import"./index-BSMZMoC6.js";import{I as nt}from"./Search-DKdOCY9h.js";import{B as ot}from"./index-lgGGxHJv.js";import{F as rt}from"./index-DGrp3v0u.js";import{C as ut}from"./index-DCh57rzN.js";import{_ as dt}from"./Ribbon-Tv3FPnrK.js";import{_ as it}from"./FormItem-CXqkb-Sw.js";import{_ as mt}from"./index-C6upw1zv.js";import{_ as _t}from"./index-RfeOYOn2.js";import"./LoadingOutlined-C7QN_DUS.js";import"./AntdIcon-9khPcjWE.js";import"./CloseOutlined-CxVmtEZu.js";import"./ExclamationCircleFilled-B0V7oa9j.js";import"./CloseCircleFilled-BQZlZZal.js";import"./KeyCode-B_gOgbN6.js";import"./motion-DAWOpLEP.js";import"./useState-BLwVHUq_.js";import"./pickAttrs-BzBa2xXa.js";import"./styleChecker-Bo7eabvc.js";import"./index-CLPL0Y6L.js";import"./FormItemContext-WqdLE0eK.js";import"./index-Nnij7LAV.js";import"./index-Da8uXs_6.js";import"./EyeOutlined-CMaT_qmz.js";import"./isPlainObject-CkZT4Lg7.js";import"./hasIn-DNGWpuSq.js";import"./_arrayIncludes-BICyThra.js";import"./collapseMotion-iRHk9BZf.js";import"./_flatRest-18Z7FUzD.js";import"./index-BPASUVML.js";import"./shallowequal-BtM4LMc3.js";import"./slide-B7qp9WAr.js";import"./isMobile-BbN7I0i_.js";import"./useMergedState-Y_64JI8B.js";import"./DownOutlined-BUTiwnGH.js";const w=o=>(X("data-v-06d196ab"),o=o(),Y(),o),ct=["dir"],pt={class:"rounded overflow-x-auto w-full m-auto"},vt={cellspacing:"0",class:"tg w-full"},ft={class:""},ht=w(()=>t("th",null,"#",-1)),gt={class:"w-8"},kt={class:"p-0 text-xs flex whitespace-nowrap"},xt={class:"p-0 text-xs"},wt={class:"p-0 text-gray-400 text-xs"},bt=w(()=>t("br",null,null,-1)),yt={class:"p-0 text-2xs text-gray-300"},Ct={class:"p-0 text-gray-400 text-xs"},Ut={key:0},jt={class:"p-0 text-gray-400 text-xs"},Et=w(()=>t("br",null,null,-1)),Vt={class:"p-0 text-2xs text-gray-300"},$t={class:"p-0 text-gray-200 text-xs"},Nt=["value"],St={class:"flex"},At=["dir"],It={class:"flex justify-between"},Mt={class:"p-0"},zt=["dir"],Bt={class:"flex p-1 justify-between"},Dt={class:"p-1"},Ot=w(()=>t("span",{class:"px-1 text-red-400"},"*",-1)),qt={class:"flex p-1 justify-between"},Ft={class:"p-1"},Pt=w(()=>t("span",{class:"px-1 text-transparent"},"*",-1)),Rt={class:"flex justify-between"},Gt={class:"p-0"},Ht={__name:"form_update",props:["open_me","data","lang"],emits:["save_update","cancel"],setup(o,{emit:S}){const l=o,U=S,h=x(!1),r=x({}),j=Z();T(()=>{l.data.c_subject_title_sum?l.data.data_title_sum=l.data.c_subject_title_sum:l.data.data_title_sum={lowest_mark:null,highest_mark:null},p()});const A=x({detail:{col:"detail",en:"detail",show:!0,ar:"تفاصيل"},ar:{col:"ar",en:"Name Arabic",show:!0,ar:"الاسم عربي  "},en:{col:"en",en:"Name English",show:!0,ar:"الاسم  English  "},highest_mark:{col:"highest_mark",en:"highest_mark",show:!0,ar:"   الدرجة العظمي"},lowest_mark:{col:"lowest_mark",en:"lowest_mark",show:!0,ar:"الحالة"},is_calc:{col:"is_calc",en:"calculated",show:!0,ar:"يتم احتسابها"},is_final:{col:"is_final",en:"final",show:!0,ar:"اختبار نهائي  "},choose:{col:"choose",en:"choose",show:!0,ar:" اختر "},edit:{col:"edit",en:"Edit",show:!0,ar:" تعديل "},add_exam:{col:"add_exam",en:"Add Exam",show:!0,ar:"  اضافة اختبار     "},total_not_found:{col:"total not found",en:"total not found",show:!0,ar:"  المجموع غير موجود        "},total_duplicated:{col:"total duplicated",en:"total not found",show:!0,ar:"  المجموع  متكرر          "},highest_mark_empty:{col:"highest_mark_empty",en:"highest_mark_empty",show:!0,ar:"الدرجة فارعة"},max:{col:"max",en:"Max",show:!0,ar:" الدرجة العظمي  "},min:{col:"min",en:"Min",show:!0,ar:"الدرجة الصغري"},is_final_not_found:{col:"is_final_not_found",en:" final exam not_found",show:!0,ar:" الاختبار النهائي غير محدد    "},notes:{col:"notes",en:"notes",show:!0,ar:"ملاحظات"}}),i=u=>{var e;return((e=A.value[u])==null?void 0:e[l.lang])||u},p=()=>{l.data.data_title_sum.highest_mark=0,l.data.my_subject_title.forEach((u,e)=>{if(u.is_calc==1){var _=l.data.data_title_sum.highest_mark,c=u.highest_mark;c==null&&(c=0),l.data.data_title_sum.highest_mark=_+c}})},b=x({}),I=()=>{b.value.id=null,l.data.my_subject_title.push(b.value),p()},M=()=>{var u={id:null,detail:null,ar:null,en:null,highest_mark:null,lowest_mark:null,is_calc:1,is_final:0,notes:null};l.data.my_subject_title.push(u)},z=u=>{if(!confirm("Are you sure?"))return;const e=l.data.my_subject_title.indexOf(u);e!==-1&&l.data.my_subject_title.splice(e,1),p()},B={labelCol:{span:8},wrapperCol:{span:14}},D=x(),O=u=>{h.value=!0,r.value=u},q=()=>{p(),j.d({fun:"save_update",data:l.data},{route:"/api/school_admin/c_subject",msg:j.lang=="en"?"Done with success":"تم بنجاح",loading:!0,res_ver:"save_update",msg_error:"msg_error",sys_error:!0,log:!0,d_fun:"save_update"}),U("show"),U("cancel")},F={name:[{required:!0,trigger:"change"}],name_ar:[{required:!0,trigger:"change"}],grades:[{required:!0,trigger:"change"}],stage:[{required:!0,trigger:"change"}]};return(u,e)=>{const _=nt,c=it,g=ot,y=mt,P=rt,R=ut,G=dt,E=_t,H=et;return l.data?(v(),f("div",{key:0,dir:o.lang=="en"?"lrt":"rtl"},[s(G,{text:"update    semester Exam",dir:"ltr",class:"w-full text-center",color:"blue"},{default:d(()=>[s(R,{hoverable:"",title:" ",class:"cursor-default w-full",dir:o.lang=="en"?"lrt":"rtl"},{default:d(()=>[s(P,J({dir:o.lang=="en"?"lrt":"rtl",ref_key:"formRef",ref:D,name:"custom-validation",model:o.data,rules:F},B),{default:d(()=>[s(c,{"has-feedback":"",label:o.lang=="en"?"detail":"تفاصيل  ",name:"detail"},{default:d(()=>[s(_,{value:l.data.detail,"onUpdate:value":e[0]||(e[0]=a=>l.data.detail=a),type:"text",autocomplete:"off"},null,8,["value"])]),_:1},8,["label"]),s(c,{"has-feedback":"",label:o.lang=="en"?"Name Arabic":"الاسم عربي",name:"ar"},{default:d(()=>[s(_,{value:l.data.ar,"onUpdate:value":e[1]||(e[1]=a=>l.data.ar=a),type:"text",autocomplete:"off"},null,8,["value"])]),_:1},8,["label"]),s(c,{"has-feedback":"",label:o.lang=="en"?"Name English":"الاسم English",name:"en"},{default:d(()=>[s(_,{value:l.data.en,"onUpdate:value":e[2]||(e[2]=a=>l.data.en=a),type:"text",autocomplete:"off"},null,8,["value"])]),_:1},8,["label"]),t("div",pt,[t("table",vt,[t("thead",ft,[t("tr",null,[ht,t("th",null,n(i("ar"))+"-"+n(i("en")),1),t("th",null,n(i("highest_mark")),1),t("th",null,n(i("edit")),1)])]),t("tbody",null,[(v(!0),f($,null,N(l.data.my_subject_title,(a,k)=>(v(),f("tr",{key:k,class:K({even:(k+1)%2===0,selected:a.select==1})},[t("td",gt,[t("div",kt,[t("div",xt,n(k+1),1)])]),t("td",null,[m(n(o.lang=="en"?a.en:a.ar)+" ",1),t("div",wt,[m(n(o.lang=="en"?a.ar:a.en)+" ",1),bt,t("div",yt,n(a.detail),1)])]),t("td",null,[m(n(a.highest_mark)+" ",1),t("div",Ct," min:"+n(a.lowest_mark),1)]),t("td",null,[s(g,{type:"primary",shape:"circle",onClick:L=>O(a),size:"small"},{default:d(()=>[s(C(at))]),_:2},1032,["onClick"]),s(g,{type:"primary",shape:"circle",onClick:L=>z(a),size:"small",class:"mx-8",danger:""},{default:d(()=>[s(C(lt))]),_:2},1032,["onClick"])])],2))),128))]),l.data.data_title_sum?(v(),f("tfoot",Ut,[t("tr",null,[t("th",null,n(o.lang=="en"?"sum":"المجموع"),1),t("th",null,[m(n(o.lang=="en"?l.data.data_title_sum.en:l.data.data_title_sum.ar)+" ",1),t("div",jt,[m(n(o.lang=="en"?l.data.data_title_sum.ar:l.data.data_title_sum.en)+" ",1),Et,t("div",Vt,n(l.data.data_title_sum.detail),1)])]),t("th",null,n(l.data.data_title_sum.highest_mark),1),t("th",null,[t("div",$t,[m(" min:"+n(l.data.data_title_sum.lowest_mark)+" ",1),s(y,{value:l.data.data_title_sum.lowest_mark,"onUpdate:value":e[3]||(e[3]=a=>l.data.data_title_sum.lowest_mark=a),onChange:e[4]||(e[4]=a=>p())},null,8,["value"])])])])])):V("",!0)])]),s(g,{type:"primary",class:"m-2",shape:"circle",onClick:e[5]||(e[5]=a=>M())},{default:d(()=>[s(C(st))]),_:1}),Q(t("select",{"onUpdate:modelValue":e[6]||(e[6]=a=>b.value=a),onChange:e[7]||(e[7]=a=>I())},[(v(!0),f($,null,N(l.data.titles,(a,k)=>(v(),f("option",{key:k,value:a},n(a.ar),9,Nt))),128))],544),[[W,b.value]]),s(c,{"has-feedback":"",label:o.lang=="en"?"notes":"ملاحظات",name:"notes"},{default:d(()=>[s(_,{value:l.data.notes,"onUpdate:value":e[8]||(e[8]=a=>l.data.notes=a),type:"text",autocomplete:"off"},null,8,["value"])]),_:1},8,["label"]),t("div",St,[s(g,{class:"mx-1",type:"primary","html-type":"submit",onClick:e[9]||(e[9]=a=>q())},{default:d(()=>[m(n(o.lang=="en"?" Save ":" حفظ التعديل  "),1)]),_:1}),s(g,{class:"mx-1",onClick:e[10]||(e[10]=a=>u.$emit("cancel"))},{default:d(()=>[m(n(o.lang=="en"?" Cancel":" الغاء    "),1)]),_:1})])]),_:1},16,["dir","model"])]),_:1},8,["dir"])]),_:1}),s(H,{dir:o.lang=="en"?"ltr":"rtl",open:h.value,"onUpdate:open":e[18]||(e[18]=a=>h.value=a),maskClosable:!1,onOk:e[19]||(e[19]=a=>{h.value=!h.value,p()}),class:"flex"},{default:d(()=>[t("table",{class:"border-0 w-100 px-8",dir:o.lang=="en"?"ltr":"rtl"},[t("tr",null,[t("td",null,[t("div",null,n(i("ar")),1),s(_,{value:r.value.ar,"onUpdate:value":e[11]||(e[11]=a=>r.value.ar=a)},null,8,["value"])])]),t("tr",null,[t("td",null,[t("div",null,n(i("en")),1),s(_,{value:r.value.en,"onUpdate:value":e[12]||(e[12]=a=>r.value.en=a)},null,8,["value"])])]),t("tr",null,[t("td",null,[t("div",null,n(i("detail")),1),s(_,{value:r.value.detail,"onUpdate:value":e[13]||(e[13]=a=>r.value.detail=a)},null,8,["value"])])]),t("tr",null,[t("td",null,[t("div",It,[t("div",Mt,n(i("is_final"))+":",1),s(E,{size:"small",checked:r.value.is_final,"onUpdate:checked":e[14]||(e[14]=a=>r.value.is_final=a),unCheckedValue:0,checkedValue:1},null,8,["checked"])])])])],8,At),t("table",{class:"border-0 w-100 px-8",dir:o.lang=="en"?"ltr":"rtl"},[t("tr",null,[t("td",null,[t("div",Bt,[t("div",Dt,[Ot,m(n(i("max")),1)]),s(y,{value:r.value.highest_mark,"onUpdate:value":e[15]||(e[15]=a=>r.value.highest_mark=a)},null,8,["value"])])])]),t("tr",null,[t("td",null,[t("div",qt,[t("div",Ft,[Pt,m(n(i("min")),1)]),s(y,{value:r.value.lowest_mark,"onUpdate:value":e[16]||(e[16]=a=>r.value.lowest_mark=a)},null,8,["value"])])])]),t("tr",null,[t("td",null,[t("div",Rt,[t("div",Gt,n(i("is_calc"))+":",1),s(E,{size:"small",checked:r.value.is_calc,"onUpdate:checked":e[17]||(e[17]=a=>r.value.is_calc=a),unCheckedValue:0,checkedValue:1},null,8,["checked"])])])])],8,zt)]),_:1},8,["dir","open"])],8,ct)):V("",!0)}}},Ie=tt(Ht,[["__scopeId","data-v-06d196ab"]]);export{Ie as default};
