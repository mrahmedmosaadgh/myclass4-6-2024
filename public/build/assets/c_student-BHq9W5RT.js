import{d as n,y as oe,m as ne,aa as ae,a2 as le,o as _,e as q,a as o,t as i,b as u,w as r,g as c,u as a,F as ue,h as re,q as de,n as _e,c as g,f as A,p as j}from"./app-DuCM5fMY.js";import{u as ie}from"./appstore-i93wDcAb.js";import G from"./update-DvfV_W7L.js";import{B as ce}from"./index-lgGGxHJv.js";import{M as pe}from"./index-CfxGvgOQ.js";import{P as me}from"./PlusOutlined-CuKesnqQ.js";import{E as H}from"./EditOutlined-CQNci86I.js";import{M as fe}from"./MoreOutlined-Dn8n-63j.js";import{_ as ve}from"./Search-DKdOCY9h.js";import"./index-BSMZMoC6.js";import{_ as ge}from"./index-5o59kPGR.js";import{_ as ye}from"./FormItem-CXqkb-Sw.js";import{_ as he}from"./index-C6upw1zv.js";import"./LoadingOutlined-C7QN_DUS.js";import"./AntdIcon-9khPcjWE.js";import"./CloseOutlined-CxVmtEZu.js";import"./ExclamationCircleFilled-B0V7oa9j.js";import"./CloseCircleFilled-BQZlZZal.js";import"./index-DGrp3v0u.js";import"./motion-DAWOpLEP.js";import"./useState-BLwVHUq_.js";import"./hasIn-DNGWpuSq.js";import"./_arrayIncludes-BICyThra.js";import"./collapseMotion-iRHk9BZf.js";import"./_flatRest-18Z7FUzD.js";import"./isPlainObject-CkZT4Lg7.js";import"./FormItemContext-WqdLE0eK.js";import"./index-CLPL0Y6L.js";import"./KeyCode-B_gOgbN6.js";import"./useMergedState-Y_64JI8B.js";import"./index-DyeIOCE9.js";import"./pickAttrs-BzBa2xXa.js";import"./slide-B7qp9WAr.js";import"./index-Da8uXs_6.js";import"./isMobile-BbN7I0i_.js";import"./DownOutlined-BUTiwnGH.js";import"./CheckOutlined-ClQcdeBd.js";import"./index-Nnij7LAV.js";import"./move-C_MpYLjS.js";import"./shallowequal-BtM4LMc3.js";import"./styleChecker-Bo7eabvc.js";import"./EyeOutlined-CMaT_qmz.js";const we={class:"hidden h-0"},xe={class:"rounded overflow-x-auto w-full m-auto"},ke={cellspacing:"0",class:"tg w-full"},be={class:""},Ce=o("th",null,"#",-1),$e={class:"w-12"},Be={class:"w-80"},De={class:"p-0 flex"},qe={class:"p-0"},Ae=o("div",{class:"p-0 text-xs text-gray-300"}," filter Ar/En/classroom ",-1),Me={class:"w-24"},Ne={class:"w-8"},Oe={class:"p-0 text-xs flex whitespace-nowrap"},Ue={class:"p-0 text-xs"},Ee={key:1,class:"p-0"},Ve={class:"w-24"},Se={class:"p-0 flex m-auto"},Fe={class:"p-4 flex gap-2 cursor-default"},Ke=["title"],Pe={class:"p-0"},ze={class:"p-0"},Le=o("div",{class:"p-4 w-full text-center text-xl"},"تعديل بيانات طالب",-1),I="/api/school_admin/c_student",Ns={__name:"c_student",setup(Te){var M,N;const t=ie(),y=n("/api/school_admin/c_student");n({}),n(!1),n(null),n(null);const J=n((N=(M=t.res)==null?void 0:M.my_students)==null?void 0:N.c_students[0].school_id);n(null);const h=n({});oe(()=>{t.res.my_students=[],Q({fun:"my_classes",data:null,confirm:!1})});const w=n(null);n("name");function Q(d={fun:"view",data:null,confirm:!1}){d.confirm==!0&&!confirm("are you sure?")||(t.res.loading=!0,t.loading=!0,t.ms("loading","loading...",2,2),axios.post(I,d).then(e=>{if(t.res.loading=!1,t.res[d.fun]=e.data,t.loading=!1,d.fun=="my_classes"){var l={id:null,ar:"no_class"};t.res.my_classes.unshift(l)}t.ms("success","loading done",2,2)}).catch(e=>{var l,C,$,B,D;if(t.loading=!1,t.ms("error","error )",3,3),e!=null&&e.message&&t.ms("error",e==null?void 0:e.message,3,3),(C=(l=e==null?void 0:e.response)==null?void 0:l.data)!=null&&C.msg&&t.ms("error",(B=($=e==null?void 0:e.response)==null?void 0:$.data)==null?void 0:B.msg,4,4),((D=e==null?void 0:e.response)==null?void 0:D.status)==419){if(!confirm("reload"))return;window.location.reload()}}))}const R=(d,e,l)=>{l==null||l==""||t.d({fun:"update_col",data:{id:d,col:e,val:l}},{route:y.value,msg:t.lang=="en"?"Done with success":"تم بنجاح",loading:!1,res_ver:"delete",msg_error:"msg_error",sys_error:!0,log:!0,d_fun:"delete"})},x=n(!1),m=n(!1),k=n({}),W=d=>{k.value=d,m.value=!m.value},X=()=>{confirm("Are you sure!")&&t.d({fun:"update",data:k.value},{route:y.value,msg:t.lang=="en"?"Done with success":"تم بنجاح",loading:!0,res_ver:"update",msg_error:"msg_error",sys_error:!0,log:!0,d_fun:"update"})},b=n(!1),Y=()=>{h.value.school_id=J.value,confirm("Are you sure!")&&t.d({fun:"insert",data:h.value},{route:y.value,msg:t.lang=="en"?"Done with success":"تم بنجاح",loading:!0,res_ver:"insert",msg_error:"msg_error",sys_error:!0,log:!0,d_fun:"insert"})};n(null),n(null),n(!1),n(!1);const f=()=>{t.d({fun:"show",data:w.value},{route:y.value,msg:t.lang=="en"?"Done with success":"تم بنجاح",loading:!0,res_ver:"my_students",msg_error:"msg_error",sys_error:!0,log:!0,d_fun:"my_students"})},Z=n("view"),ee=n({my_mood:"view"});n({teacher_start:"",teacher_end:"",student_start:"",student_end:"",name:"",name_ar:"",stage:null,grades:"",notes:null});const se=ne(()=>(t.d_fun=="update"&&(m.value=!1,f()),t.d_fun=="delete"&&f(),t.d_fun=="create"&&(Z.value="view",ee.value.my_mood="view"),t.d_fun=="save_all"&&f(),t.d_counter));return n([]),(d,e)=>{var E,V,S,F,K,P,z;const l=ce,C=ve,$=ye,B=he,D=ae("n-popover"),te=ge,O=pe,U=le("clipboard");return _(),q("div",null,[o("div",we,i(se.value),1),u(l,{type:"primary",shape:"circle",onClick:e[0]||(e[0]=s=>b.value=!b.value)},{default:r(()=>[u(a(me))]),_:1}),o("div",xe,[o("table",ke,[o("thead",be,[o("tr",null,[Ce,o("th",$e,[u(l,{type:"primary",shape:"circle",onClick:e[1]||(e[1]=s=>x.value=!x.value)},{default:r(()=>[u(a(H))]),_:1}),c(" "+i(a(t).lang=="en"?"id number":"رقم الجلوس"),1)]),o("th",Be,[o("div",De,[o("div",qe,[u($,{"has-feedback":"",name:"ar"},{default:r(()=>[Ae,u(C,{onKeyup:e[2]||(e[2]=de(s=>f(),["enter"])),value:w.value,"onUpdate:value":e[3]||(e[3]=s=>w.value=s),type:"text",autocomplete:"off",onSearch:e[4]||(e[4]=s=>f())},null,8,["value"])]),_:1})])]),c(" "+i(a(t).lang=="en"?"Name":"الاسم"),1)]),o("th",Me,[c(i(a(t).lang=="en"?"classroom":"الفصل")+" ",1),u(l,{type:"primary",onClick:e[5]||(e[5]=s=>{a(t).d({fun:"show_no_class",data:w.value},{route:I,msg:a(t).lang=="en"?"Done with success":"تم بنجاح",loading:!0,res_ver:"my_students",msg_error:"msg_error",sys_error:!0,log:!0,d_fun:"my_students"})}),class:"p-1 text-white"},{default:r(()=>[c(" no class ")]),_:1})]),o("th",null," count:"+i((F=(S=(V=(E=a(t))==null?void 0:E.res)==null?void 0:V.my_students)==null?void 0:S.c_students)==null?void 0:F.length),1)])]),o("tbody",null,[(_(!0),q(ue,null,re((z=(P=(K=a(t))==null?void 0:K.res)==null?void 0:P.my_students)==null?void 0:z.c_students,(s,p)=>{var L,T;return _(),q("tr",{key:p,class:_e({even:(p+1)%2===0,selected:s.select==1})},[o("td",Ne,[o("div",Oe,[o("div",Ue,i(p+1),1)])]),o("td",null,[x.value?(_(),g(B,{key:0,value:s.sequence,"onUpdate:value":v=>s.sequence=v,onBlur:v=>R(s.id,"sequence",s.sequence)},null,8,["value","onUpdate:value","onBlur"])):A("",!0),x.value?A("",!0):(_(),q("div",Ee,i(s.sequence),1))]),o("td",Ve,[o("div",Se,[u(D,{trigger:"click"},{trigger:r(()=>[u(l,{type:"text",class:"p-1 text-white"},{default:r(()=>[u(a(fe),{class:"p-1 rounded-full bg-blue-300 hover:scale-150"})]),_:1})]),default:r(()=>[o("div",Fe,[j((_(),g(l,{onClick:e[6]||(e[6]=v=>a(t).msg.info("username  copied")),type:"primary"},{default:r(()=>[c("copy username ")]),_:2},1024)),[[U,s.my_account.email,"copy"]]),j((_(),g(l,{onClick:e[7]||(e[7]=v=>a(t).msg.info("password copied")),type:"primary"},{default:r(()=>[c("copy password ")]),_:2},1024)),[[U,s.my_account.my_password,"copy"]])])]),_:2},1024),o("div",{class:"pt-2 flex",title:a(t).lang=="en"?s.ar+" "+s.detail:s.en+" "+s.detail},[o("div",Pe,i(a(t).lang=="en"?s.en:s.ar),1),o("div",ze,[(s==null?void 0:s.paid)==0?(_(),g(te,{key:0,class:"px-1 py-0 m-0 text-center text-xs red",message:"Blocked",type:(s==null?void 0:s.paid)==0?"error":"success"},null,8,["type"])):A("",!0)])],8,Ke)])]),o("td",null,i(a(t).lang=="en"?(L=s==null?void 0:s.my_class)==null?void 0:L.en:(T=s==null?void 0:s.my_class)==null?void 0:T.ar),1),o("td",null,[u(l,{type:"text",onClick:v=>W(s),class:"p-0 text-white"},{default:r(()=>[u(a(H),{class:"p-1 rounded-full bg-blue-300 hover:scale-150"})]),_:2},1032,["onClick"])])],2)}),128))])]),u(O,{maskClosable:!1,open:m.value,"onUpdate:open":e[9]||(e[9]=s=>m.value=s),title:"",footer:null},{default:r(()=>{var s;return[Le,m.value?(_(),g(G,{key:0,data:k.value,classes:(s=a(t).res)==null?void 0:s.my_classes,onOk:e[8]||(e[8]=p=>{k.value=p,X()})},{default:r(()=>[c("update err")]),_:1},8,["data","classes"])):A("",!0)]}),_:1},8,["open"]),u(O,{title:a(t).lang=="en"?"new student":"طالب جديد",open:b.value,"onUpdate:open":e[11]||(e[11]=s=>b.value=s),footer:null,class:"p-2"},{default:r(()=>{var s;return[u(G,{data:h.value,classes:(s=a(t).res)==null?void 0:s.my_classes,onOk:e[10]||(e[10]=p=>{h.value=p,Y()})},{default:r(()=>[c("update err")]),_:1},8,["data","classes"])]}),_:1},8,["title","open"])])])}}};export{Ns as default};
