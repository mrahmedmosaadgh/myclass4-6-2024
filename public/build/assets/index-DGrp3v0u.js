import{_ as N,u as Ce,ac as Ve,ad as je,al as qe,d as We,e as fe,P as he,t as _e,o as ne,b as B,a as me,s as ge,ai as Ne,f as Z}from"./LoadingOutlined-C7QN_DUS.js";import{t as ve,c as Re,g as He,b as De,a as le,v as $e,d as Me,_ as ze,u as Ue,e as Ke,f as pe,h as ae,i as be,j as Xe}from"./FormItem-CXqkb-Sw.js";import{S as Ye,a as we,q as Te}from"./motion-DAWOpLEP.js";import{r as Ge,o as Qe,n as Ze,a as Je,q as Be,i as et}from"./useState-BLwVHUq_.js";import{e as tt,f as de,c as nt,g as Le,t as rt}from"./hasIn-DNGWpuSq.js";import{a as it}from"./_arrayIncludes-BICyThra.js";import{s as at,o as lt,f as st}from"./_flatRest-18Z7FUzD.js";import{i as ot}from"./isPlainObject-CkZT4Lg7.js";import{d as Ie,u as X,s as ut,L as ct,x as ie,l as dt,a4 as ye,K as ft,m as C,b as ht}from"./app-DuCM5fMY.js";import{u as mt,b as ce}from"./FormItemContext-WqdLE0eK.js";function Fe(e){return typeof e=="object"&&e!=null&&e.nodeType===1}function Pe(e,t){return(!t||e!=="hidden")&&e!=="visible"&&e!=="clip"}function se(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var r=getComputedStyle(e,null);return Pe(r.overflowY,t)||Pe(r.overflowX,t)||function(a){var n=function(i){if(!i.ownerDocument||!i.ownerDocument.defaultView)return null;try{return i.ownerDocument.defaultView.frameElement}catch{return null}}(a);return!!n&&(n.clientHeight<a.scrollHeight||n.clientWidth<a.scrollWidth)}(e)}return!1}function re(e,t,r,a,n,i,u,h){return i<e&&u>t||i>e&&u<t?0:i<=e&&h<=r||u>=t&&h>=r?i-e-a:u>t&&h<r||i<e&&h>r?u-t+n:0}var Ee=function(e,t){var r=window,a=t.scrollMode,n=t.block,i=t.inline,u=t.boundary,h=t.skipOverflowHiddenElements,b=typeof u=="function"?u:function(xe){return xe!==u};if(!Fe(e))throw new TypeError("Invalid target");for(var E,O,k=document.scrollingElement||document.documentElement,M=[],y=e;Fe(y)&&b(y);){if((y=(O=(E=y).parentElement)==null?E.getRootNode().host||null:O)===k){M.push(y);break}y!=null&&y===document.body&&se(y)&&!se(document.documentElement)||y!=null&&se(y,h)&&M.push(y)}for(var T=r.visualViewport?r.visualViewport.width:innerWidth,I=r.visualViewport?r.visualViewport.height:innerHeight,V=window.scrollX||pageXOffset,L=window.scrollY||pageYOffset,x=e.getBoundingClientRect(),s=x.height,l=x.width,g=x.top,c=x.right,f=x.bottom,d=x.left,F=n==="start"||n==="nearest"?g:n==="end"?f:g+s/2,v=i==="center"?d+l/2:i==="end"?c:d,P=[],j=0;j<M.length;j++){var p=M[j],q=p.getBoundingClientRect(),R=q.height,H=q.width,o=q.top,m=q.right,w=q.bottom,S=q.left;if(a==="if-needed"&&g>=0&&d>=0&&f<=I&&c<=T&&g>=o&&f<=w&&d>=S&&c<=m)return P;var _=getComputedStyle(p),$=parseInt(_.borderLeftWidth,10),K=parseInt(_.borderTopWidth,10),W=parseInt(_.borderRightWidth,10),D=parseInt(_.borderBottomWidth,10),A=0,z=0,G="offsetWidth"in p?p.offsetWidth-p.clientWidth-$-W:0,U="offsetHeight"in p?p.offsetHeight-p.clientHeight-K-D:0,Q="offsetWidth"in p?p.offsetWidth===0?0:H/p.offsetWidth:0,ee="offsetHeight"in p?p.offsetHeight===0?0:R/p.offsetHeight:0;if(k===p)A=n==="start"?F:n==="end"?F-I:n==="nearest"?re(L,L+I,I,K,D,L+F,L+F+s,s):F-I/2,z=i==="start"?v:i==="center"?v-T/2:i==="end"?v-T:re(V,V+T,T,$,W,V+v,V+v+l,l),A=Math.max(0,A+L),z=Math.max(0,z+V);else{A=n==="start"?F-o-K:n==="end"?F-w+D+U:n==="nearest"?re(o,w,R,K,D+U,F,F+s,s):F-(o+R/2)+U/2,z=i==="start"?v-S-$:i==="center"?v-(S+H/2)+G/2:i==="end"?v-m+W+G:re(S,m,H,$,W+G,v,v+l,l);var te=p.scrollLeft,J=p.scrollTop;F+=J-(A=Math.max(0,Math.min(J+A/ee,p.scrollHeight-R/ee+U))),v+=te-(z=Math.max(0,Math.min(te+z/Q,p.scrollWidth-H/Q+G)))}P.push({el:p,top:A,left:z})}return P};function Se(e){return e===Object(e)&&Object.keys(e).length!==0}function gt(e,t){t===void 0&&(t="auto");var r="scrollBehavior"in document.body.style;e.forEach(function(a){var n=a.el,i=a.top,u=a.left;n.scroll&&r?n.scroll({top:i,left:u,behavior:t}):(n.scrollTop=i,n.scrollLeft=u)})}function vt(e){return e===!1?{block:"end",inline:"nearest"}:Se(e)?e:{block:"start",inline:"nearest"}}function pt(e,t){var r=e.isConnected||e.ownerDocument.documentElement.contains(e);if(Se(t)&&typeof t.behavior=="function")return t.behavior(r?Ee(e,t):[]);if(r){var a=vt(t);return gt(Ee(e,a),a.behavior)}}function bt(e,t){return at(lt(e,t,tt),e+"")}function wt(e,t,r){var a=-1,n=e.length;t<0&&(t=-t>n?0:n+t),r=r>n?n:r,r<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(n);++a<n;)i[a]=e[a+t];return i}var oe=function(){return Ge.Date.now()},yt="Expected a function",Ft=Math.max,Pt=Math.min;function Et(e,t,r){var a,n,i,u,h,b,E=0,O=!1,k=!1,M=!0;if(typeof e!="function")throw new TypeError(yt);t=ve(t)||0,Qe(r)&&(O=!!r.leading,k="maxWait"in r,i=k?Ft(ve(r.maxWait)||0,t):i,M="trailing"in r?!!r.trailing:M);function y(c){var f=a,d=n;return a=n=void 0,E=c,u=e.apply(d,f),u}function T(c){return E=c,h=setTimeout(L,t),O?y(c):u}function I(c){var f=c-b,d=c-E,F=t-f;return k?Pt(F,i-d):F}function V(c){var f=c-b,d=c-E;return b===void 0||f>=t||f<0||k&&d>=i}function L(){var c=oe();if(V(c))return x(c);h=setTimeout(L,I(c))}function x(c){return h=void 0,M&&a?y(c):(a=n=void 0,u)}function s(){h!==void 0&&clearTimeout(h),E=0,a=b=n=h=void 0}function l(){return h===void 0?u:x(oe())}function g(){var c=oe(),f=V(c);if(a=arguments,n=this,b=c,f){if(h===void 0)return T(b);if(k)return clearTimeout(h),h=setTimeout(L,t),y(b)}return h===void 0&&(h=setTimeout(L,t)),u}return g.cancel=s,g.flush=l,g}function Ot(e){return Ze(e)&&Je(e)}function kt(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Mt=Math.min;function Tt(e,t,r){for(var a=it,n=e[0].length,i=e.length,u=i,h=Array(i),b=1/0,E=[];u--;){var O=e[u];u&&t&&(O=de(O,Be(t))),b=Mt(O.length,b),h[u]=n>=120&&O.length>=120?new Ye(u&&O):void 0}O=e[0];var k=-1,M=h[0];e:for(;++k<n&&E.length<b;){var y=O[k],T=y;if(y=y!==0?y:0,!(M?we(M,T):a(E,T))){for(u=i;--u;){var I=h[u];if(!(I?we(I,T):a(e[u],T)))continue e}M&&M.push(T),E.push(y)}}return E}function Lt(e){return Ot(e)?e:[]}var It=bt(function(e){var t=de(e,Lt);return t.length&&t[0]===e[0]?Tt(t):[]});function St(e,t){return t.length<2?e:nt(e,wt(t,0,-1))}function At(e,t){return t=Le(t,e),e=St(e,t),e==null||delete e[rt(kt(t))]}function xt(e){return ot(e)?void 0:e}var Ct=1,Vt=2,jt=4,qt=st(function(e,t){var r={};if(e==null)return r;var a=!1;t=de(t,function(i){return i=Le(i,e),a||(a=i.length>1),i}),Re(e,He(e),r),a&&(r=De(r,Ct|Vt|jt,xt));for(var n=t.length;n--;)At(r,t[n]);return r});function Ae(e){let t=!1,r=e.length;const a=[];return e.length?new Promise((n,i)=>{e.forEach((u,h)=>{u.catch(b=>(t=!0,b)).then(b=>{r-=1,a[h]=b,!(r>0)&&(t&&i(a),n(a))})})}):Promise.resolve([])}function Oe(e){let t=!1;return e&&e.length&&e.every(r=>r.required?(t=!0,!1):!0),t}function ke(e){return e==null?[]:Array.isArray(e)?e:[e]}function ue(e,t,r){let a=e;t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");const n=t.split(".");let i=0;for(let u=n.length;i<u-1&&!(!a&&!r);++i){const h=n[i];if(h in a)a=a[h];else{if(r)throw new Error("please transfer a valid name path to validate!");break}}return{o:a,k:n[i],v:a?a[n[i]]:null,isValid:a&&n[i]in a}}function Wt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ie({}),r=arguments.length>2?arguments[2]:void 0;const a=le(X(e)),n=ut({}),i=ct([]),u=s=>{N(X(e),N(N({},le(a)),s)),dt(()=>{Object.keys(n).forEach(l=>{n[l]={autoLink:!1,required:Oe(X(t)[l])}})})},h=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],l=arguments.length>1?arguments[1]:void 0;return l.length?s.filter(g=>{const c=ke(g.trigger||"change");return It(c,l).length}):s};let b=null;const E=function(s){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=arguments.length>2?arguments[2]:void 0;const c=[],f={};for(let v=0;v<s.length;v++){const P=s[v],j=ue(X(e),P,g);if(!j.isValid)continue;f[P]=j.v;const p=h(X(t)[P],ke(l&&l.trigger));p.length&&c.push(O(P,j.v,p,l||{}).then(()=>({name:P,errors:[],warnings:[]})).catch(q=>{const R=[],H=[];return q.forEach(o=>{let{rule:{warningOnly:m},errors:w}=o;m?H.push(...w):R.push(...w)}),R.length?Promise.reject({name:P,errors:R,warnings:H}):{name:P,errors:R,warnings:H}}))}const d=Ae(c);b=d;const F=d.then(()=>b===d?Promise.resolve(f):Promise.reject([])).catch(v=>{const P=v.filter(j=>j&&j.errors.length);return P.length?Promise.reject({values:f,errorFields:P,outOfDate:b!==d}):Promise.resolve(f)});return F.catch(v=>v),F},O=function(s,l,g){let c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const f=$e([s],l,g,N({validateMessages:Me},c),!!c.validateFirst);return n[s]?(n[s].validateStatus="validating",f.catch(d=>d).then(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];var F;if(n[s].validateStatus==="validating"){const v=d.filter(P=>P&&P.errors.length);n[s].validateStatus=v.length?"error":"success",n[s].help=v.length?v.map(P=>P.errors):null,(F=r==null?void 0:r.onValidate)===null||F===void 0||F.call(r,s,!v.length,v.length?ye(n[s].help[0]):null)}}),f):f.catch(d=>d)},k=(s,l)=>{let g=[],c=!0;s?Array.isArray(s)?g=s:g=[s]:(c=!1,g=i.value);const f=E(g,l||{},c);return f.catch(d=>d),f},M=s=>{let l=[];s?Array.isArray(s)?l=s:l=[s]:l=i.value,l.forEach(g=>{n[g]&&N(n[g],{validateStatus:"",help:null})})},y=s=>{const l={autoLink:!1},g=[],c=Array.isArray(s)?s:[s];for(let f=0;f<c.length;f++){const d=c[f];(d==null?void 0:d.validateStatus)==="error"&&(l.validateStatus="error",d.help&&g.push(d.help)),l.required=l.required||(d==null?void 0:d.required)}return l.help=g,l};let T=a,I=!0;const V=s=>{const l=[];i.value.forEach(g=>{const c=ue(s,g,!1),f=ue(T,g,!1);(I&&(r==null?void 0:r.immediate)&&c.isValid||!Te(c.v,f.v))&&l.push(g)}),k(l,{trigger:"change"}),I=!1,T=le(ye(s))},L=r==null?void 0:r.debounce;let x=!0;return ie(t,()=>{i.value=t?Object.keys(X(t)):[],!x&&r&&r.validateOnRuleChange&&k(),x=!1},{deep:!0,immediate:!0}),ie(i,()=>{const s={};i.value.forEach(l=>{s[l]=N({},n[l],{autoLink:!1,required:Oe(X(t)[l])}),delete n[l]});for(const l in n)Object.prototype.hasOwnProperty.call(n,l)&&delete n[l];N(n,s)},{immediate:!0}),ie(e,L&&L.wait?Et(V,L.wait,qt(L,["wait"])):V,{immediate:r&&!!r.immediate,deep:!0}),{modelRef:e,rulesRef:t,initialModel:a,validateInfos:n,resetFields:u,validate:k,validateField:O,mergeValidateInfo:y,clearValidate:M}}const _t=()=>({layout:he.oneOf(_e("horizontal","inline","vertical")),labelCol:ne(),wrapperCol:ne(),colon:B(),labelAlign:me(),labelWrap:B(),prefixCls:String,requiredMark:ge([String,Boolean]),hideRequiredMark:B(),model:he.object,rules:ne(),validateMessages:ne(),validateOnRuleChange:B(),scrollToFirstError:Ne(),onSubmit:Z(),name:String,validateTrigger:ge([String,Array]),size:me(),disabled:B(),onValuesChange:Z(),onFieldsChange:Z(),onFinish:Z(),onFinishFailed:Z(),onValidate:Z()});function Nt(e,t){return Te(ae(e),ae(t))}const Y=ft({compatConfig:{MODE:3},name:"AForm",inheritAttrs:!1,props:et(_t(),{layout:"horizontal",hideRequiredMark:!1,colon:!0}),Item:ze,useForm:Wt,setup(e,t){let{emit:r,slots:a,expose:n,attrs:i}=t;const{prefixCls:u,direction:h,form:b,size:E,disabled:O}=Ce("form",e),k=C(()=>e.requiredMark===""||e.requiredMark),M=C(()=>{var o;return k.value!==void 0?k.value:b&&((o=b.value)===null||o===void 0?void 0:o.requiredMark)!==void 0?b.value.requiredMark:!e.hideRequiredMark});Ve(E),je(O);const y=C(()=>{var o,m;return(o=e.colon)!==null&&o!==void 0?o:(m=b.value)===null||m===void 0?void 0:m.colon}),{validateMessages:T}=qe(),I=C(()=>N(N(N({},Me),T.value),e.validateMessages)),[V,L]=Ue(u),x=C(()=>We(u.value,{[`${u.value}-${e.layout}`]:!0,[`${u.value}-hide-required-mark`]:M.value===!1,[`${u.value}-rtl`]:h.value==="rtl",[`${u.value}-${E.value}`]:E.value},L.value)),s=Ie(),l={},g=(o,m)=>{l[o]=m},c=o=>{delete l[o]},f=o=>{const m=!!o,w=m?ae(o).map(be):[];return m?Object.values(l).filter(S=>w.findIndex(_=>Nt(_,S.fieldName.value))>-1):Object.values(l)},d=o=>{e.model&&f(o).forEach(m=>{m.resetField()})},F=o=>{f(o).forEach(m=>{m.clearValidate()})},v=o=>{const{scrollToFirstError:m}=e;if(r("finishFailed",o),m&&o.errorFields.length){let w={};typeof m=="object"&&(w=m),j(o.errorFields[0].name,w)}},P=function(){return R(...arguments)},j=function(o){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const w=f(o?[o]:void 0);if(w.length){const S=w[0].fieldId.value,_=S?document.getElementById(S):null;_&&pt(_,N({scrollMode:"if-needed",block:"nearest"},m))}},p=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(o===!0){const m=[];return Object.values(l).forEach(w=>{let{namePath:S}=w;m.push(S.value)}),pe(e.model,m)}else return pe(e.model,o)},q=(o,m)=>{if(!e.model)return Promise.reject("Form `model` is required for validateFields to work.");const w=!!o,S=w?ae(o).map(be):[],_=[];Object.values(l).forEach(W=>{var D;if(w||S.push(W.namePath.value),!(!((D=W.rules)===null||D===void 0)&&D.value.length))return;const A=W.namePath.value;if(!w||Xe(S,A)){const z=W.validateRules(N({validateMessages:I.value},m));_.push(z.then(()=>({name:A,errors:[],warnings:[]})).catch(G=>{const U=[],Q=[];return G.forEach(ee=>{let{rule:{warningOnly:te},errors:J}=ee;te?Q.push(...J):U.push(...J)}),U.length?Promise.reject({name:A,errors:U,warnings:Q}):{name:A,errors:U,warnings:Q}}))}});const $=Ae(_);s.value=$;const K=$.then(()=>s.value===$?Promise.resolve(p(S)):Promise.reject([])).catch(W=>{const D=W.filter(A=>A&&A.errors.length);return Promise.reject({values:p(S),errorFields:D,outOfDate:s.value!==$})});return K.catch(W=>W),K},R=function(){return q(...arguments)},H=o=>{o.preventDefault(),o.stopPropagation(),r("submit",o),e.model&&q().then(w=>{r("finish",w)}).catch(w=>{v(w)})};return n({resetFields:d,clearValidate:F,validateFields:q,getFieldsValue:p,validate:P,scrollToField:j}),Ke({model:C(()=>e.model),name:C(()=>e.name),labelAlign:C(()=>e.labelAlign),labelCol:C(()=>e.labelCol),labelWrap:C(()=>e.labelWrap),wrapperCol:C(()=>e.wrapperCol),vertical:C(()=>e.layout==="vertical"),colon:y,requiredMark:M,validateTrigger:C(()=>e.validateTrigger),rules:C(()=>e.rules),addField:g,removeField:c,onValidate:(o,m,w)=>{r("validate",o,m,w)},validateMessages:I}),ie(()=>e.rules,()=>{e.validateOnRuleChange&&q()}),()=>{var o;return V(ht("form",fe(fe({},i),{},{onSubmit:H,class:[x.value,i.class]}),[(o=a.default)===null||o===void 0?void 0:o.call(a)]))}}});Y.useInjectFormItemContext=mt;Y.ItemRest=ce;Y.install=function(e){return e.component(Y.name,Y),e.component(Y.Item.name,Y.Item),e.component(ce.name,ce),e};export{Y as F};
